{% extends "project_base.html" %}
{% load smartif %}

{% block title %}Activity - VirtualPatient{% endblock %}

{% block css %}
   {{ block.super }}
   <link href="/activity/virtualpatient/media/css/virtualpatient.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block js %}
   {{ block.super }}
   <script type="text/javascript" src="/site_media/js/mochikit/MochiKit/MochiKit.js"></script>
   <script type="text/javascript" src="/site_media/js/mochikit/MochiKit/Visual.js"></script>
   <script type="text/javascript" src="/site_media/js/mochikit/MochiKit/DragAndDrop.js"></script>
   <script type="text/javascript" src="/site_media/js/json2.js"></script>
{% endblock %}

{% block content %}
    {{ block.super }} 
    <h6>Virtual Patient >> Classify Treatment Options</h6>
      
    <div id="patient">
      <div id="patient_description">
         <center>
            <h3>{{patient.name}}</h3>
            <table cellpadding="10" cellspacing="10">
                <tr><td><img src="/activity/virtualpatient/media/images/patient_{{patient.id}}.jpg"/></td><td>{% autoescape off %}{{ patient.description }}{% endautoescape %}</td></tr>
             </table>
         </center>
      </div>
      <div id="treatment_feedback">
         {{ prescription }}
         <br />
         <br />
         {% autoescape off %}{{feedback}}{% endautoescape %}
      </div>
      <input type="hidden" id="patient_id" name="patient_id" value="{{patient.id}}"/>
      <input type="hidden" id="page_id" name="page_id" value="1"/>
    </div>
    <div id="treatment_types">
	    <div class="treatment_type_box">
	       <center>
		       <strong>BEST TREATMENT CHOICE</strong>
		       <div id="best_treatment" class="treatment_type">
		       {% for to in best_treatment_options %}
		          {% if to.combination %}
		             <span id='combination'>
                     <img src='/activity/virtualpatient/media/images/combination.jpg'>
                   </span>
		          {% else %}
				       <span id='{{to.medication.tag}}'>
		               <img src='/activity/virtualpatient/media/images/{{ to.medication.tag }}.jpg'>
		             </span>
	             {% endif %}
		       {% endfor %}
		        </div>
		     </center>
		     <div class="treatment_reasoning">
                {% for to in best_treatment_options %}
                   {% autoescape off %}{{ to.reasoning }}{% endautoescape %}
                {% endfor %}
           </div>
		 </div>
       <div class="treatment_type_box">
          <center>
             <strong>REASONABLE, NOT OPTIMAL</strong>
             <div id="reasonable_treatment" class="treatment_type">
             {% for to in reasonable_treatment_options %}
                {% if to.combination %}
                   <span id='combination'>
                     <img src='/activity/virtualpatient/media/images/combination.jpg'>
                   </span>
                {% else %}
                   <span id='{{to.medication.tag}}'>
                     <img src='/activity/virtualpatient/media/images/{{ to.medication.tag }}.jpg'>
                   </span>
                {% endif %}
             {% endfor %}
              </div>
           </center>
           <div class="treatment_reasoning">
                {% for to in reasonable_treatment_options %}
                   {% autoescape off %}{{ to.reasoning }}{% endautoescape %}
                {% endfor %}
           </div>
       </div>
       <div class="treatment_type_box">
          <center>
             <strong>UNLIKELY TO BE EFFECTIVE</strong>
             <div id="ineffective_treatment" class="treatment_type">
             {% for to in ineffective_treatment_options %}
                {% if to.combination %}
                   <span id='combination'>
                     <img src='/activity/virtualpatient/media/images/combination.jpg'>
                   </span>
                {% else %}
                   <span id='{{to.medication.tag}}'>
                     <img src='/activity/virtualpatient/media/images/{{ to.medication.tag }}.jpg'>
                   </span>
                {% endif %}
             {% endfor %}
              </div>
           </center>
           <div class="treatment_reasoning">
              {% for to in ineffective_treatment_options %}
                 {% autoescape off %}{{ to.reasoning }}{% endautoescape %}
              {% endfor %}
           </div>
       </div>
       <div class="treatment_type_box">
          <center>
             <strong>POTENTIALLY HARMFUL</strong>
             <div id="harmful_treatment" class="treatment_type">
             {% for to in harmful_treatment_options %}
                {% if to.combination %}
                   <span id='combination'>
                     <img src='/activity/virtualpatient/media/images/combination.jpg'>
                   </span>
                {% else %}
                   <span id='{{to.medication.tag}}'>
                     <img src='/activity/virtualpatient/media/images/{{ to.medication.tag }}.jpg'>
                   </span>
                {% endif %}
             {% endfor %}
              </div>
           </center>
           <div class="treatment_reasoning">
              {% for to in harmful_treatment_options %}
                 {% autoescape off %}{{ to.reasoning }}{% endautoescape %}
              {% endfor %}
           </div>
       </div>
	 </div>
	 
	 <br />
	 <br />
	 
	 <div style="display: none">
		 <strong>AVAILABLE TREATMENTS</strong>   
	    <div id="available_treatments" class="treatment_droppable">
	    

	      
	      <span id="combination" class="combination treatment_draggable">
	         <img src="/activity/virtualpatient/media/images/combination.jpg">
	      </span>
	    </div>
	    
	    <div id="next_navigation">
	       <input id='next_button' type='submit' value='Submit' disabled='true' onclick="go();return false;"></input>
	    </div>
	 </div>

{% endblock %}

{% block contentnav %}
   <a id="previous" href="{{previous_url}}">Previous</a>

   {% if next_url %}
      <a id='next' href="{{next_url}}">Next</a>
   {% endif %}          
{% endblock %}